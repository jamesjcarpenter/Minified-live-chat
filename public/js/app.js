window.addEventListener("load",()=>{var e=io.connect("anomic.io/");$("#start").click(),$("#start").hide(),$("#bitrateset").hide(),$("#start2").click(),$("#start2").hide();var t=window.location.href;console.log(t),console.log(t.substr(t.lastIndexOf("/")+1)),$("#copyinput").val($("#copyinput").val()+""+window.location.href),$("#data").focus(),$(".input-group-addon").remove(),$("#youtubeopen").click(function(){$(".ui.longer.modal").modal("show")}),$(".ytp-cued-thumbnail-overlay-image").hide(),$("#canvasdraw").click(function(){$(".ui.longer.large.modal").modal("show")}),$("#userscheck").click(function(){$(".ui.small.modal.users").modal("show")}),$(".icon").addClass("inverted"),document.getElementById("bulb").onclick=function(){document.getElementById("themecss").href="css/indextheme.css",$(".ui.button").removeClass("inverted"),$(".icon").removeClass("inverted"),$(".ui.medium.left.pointing.label").removeClass("inverted"),$(".large.ui.teal.secondary.button.inverted").addClass("large ui teal").removeClass("large ui black"),$("#cpybutton").removeClass("ui teal").removeClass("ui black")},$(document).ready(function(){$(".arrow-right").bind("click",function(e){e.preventDefault(),$(".vid-list-container").stop().animate({scrollLeft:"+=336"},750)}),$(".arrow-left").bind("click",function(e){e.preventDefault(),$(".vid-list-container").stop().animate({scrollLeft:"-=336"},750)})});var a=JSON.stringify(new Date(Date.now()).toLocaleTimeString());e.on("connect",function(){e.room=[];var a=t.substr(t.lastIndexOf("/")+1);e.room=a,e.emit("join",a);var n=prompt("Enter username.");$(function(){e.emit("adduser",n)}),e.on("askForUserId",()=>{e.emit(e.id)}),e.on("connect",function(){e.emit("connected",userName)}),e.on("private-message",(e,t)=>{console.log("You received a message"),console.log(t.data)})}),console.log(Object.keys.usernames),e.on("updateusers",function(e){$("#userlist").empty(),$.each(e,function(e,t){$("#userlist").append('<li><span class="ui white text user">'+e+'</span><span class="ui small white text pm"></div></a></li>'),console.log($(".span.ui.white.text.user").val()),$(".ui.small.white.text.pm").click(function(){})})}),e.on("updateids",function(e){$.each(e,function(e,t){var a=$("#userlist");$('<div class="ui mini button pm"id="pmbtn"></div>').data("id",e).appendTo(a),console.log("socket id for user"+$(".ui.mini.button.pm").data("id"))}),$(".ui.mini.button.pm").click(function(){$(this).each(function(){$(this).data("id")})})}),e.on("updatechat",function(e,t){$("#conversation").append('<div class="ui container"><div class="ui medium basic segment"></div></div>'),$("#scrollable").animate({scrollTop:$("#scrollable").prop("scrollHeight")},300),$("#data").focus(),$("#conversation").append($('<img id="useravatar" class="ui avatar image" src="/images/avatarsmall.jpg"></img><span class="ui small text" id="username"name="avatar"><b></b></span>').text(e)),$("#conversation").append($('<span class="ui small text" id="date"name="date"></span>').text(JSON.parse(a))),$("#conversation").append($('<div id="messagedata"><p class="messaging"><span class="ui small text"></span></p></div></div>').text(t)),$(".messaging").each(function(){$(this).html($(this).html().replace(/((http|https|ftp):\/\/[\w?=&.\/-;#~%-]+(?![\w\s?&.\/;#~%"=-]*>))/g,'<a href="$1">$1</a> '))})}),e.on("serverupdatechat",function(e,a,n){$("#conversation").append('<div class="ui container"><div class="ui small basic segment"></div></div>'),$("#scrollable").animate({scrollTop:$("#scrollable").prop("scrollHeight")},1100),$("#conversation").append($('<div class="ui small grey label"id="servermessage"><span class="ui small text"></span></div>').text(e)),$("#blocktext").empty(),$("#blocktext").append('<h4 class="ui text" id="blocktext">'+t.substr(t.lastIndexOf("/")+1)+"</h4>")}),e.on("serverupdateuser",function(e){$("#profilepic2").empty(),$("#profilepic2").append('<h5 class="ui text"id="profilepic2"></h5>').text(e),console.log($(".ui.mini.button.pm").attr("name"))}),e.on("connect",function(t){$("#datasend").click(function(){var t=$("#data").val().trim();$("#data").val("");var a={"<3":"❤️","</3":"💔",":D":"😂",":)":"😀",";)":"😉",":(":"☹️",":p":"😋",";p":"😜",":'(":"😢","8)":"😎"};function n(e){return e.replace(/([()[{*+.$^\\|?])/g,"\\$1")}document.getElementById("data").oninput=function(){for(var e in a){var t=new RegExp(n(e),"gim");this.value=this.value=this.value.replace(t,a[e])}},e.emit("sendchat",t)}),$("#data").keypress(function(e){13==e.which&&($(this).blur(),$("#datasend").focus().click())})}),e.on("updateroomusers",function(e,t){$("#roomusers").empty(),$.each(e,function(e,t){$("#roomusers").append("+value+")})}),$("#data").keyup(function(){$("#data").val()?($("#datasend").show(),e.emit("typing")):$("#datasend").hide()}),e.on("typing",function(e){var t;clearTimeout(t),$("#typing").append('<div class="ui text container"><span class="ui small text" id="typing"></span></div>').text(e),t=setTimeout(function(){$("#typing").empty()},3500)}),e.on("disconnect",function(){e.emit("updateusers",e.usernames),e.emit("serverupdatechat",e.username+" has disconnected"),e.leave(e.room),delete e.usernames[e.username]}),window.onunload=function(){$("#start").show(),$("#start").click()}});